{% extends 'base.html' %}
{% block title %}Admin Dashboard | HA CyberCircuit{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4 text-primary">ğŸ§‘â€ğŸ’¼ Admin Dashboard</h2>

  <!-- Dashboard Metrics -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-white bg-primary shadow-sm">
        <div class="card-body">
          <h5 class="card-title">ğŸ“¦ Total Orders</h5>
          <p class="card-text fs-4">{{ total_orders }}</p>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card text-white bg-success shadow-sm">
        <div class="card-body">
          <h5 class="card-title">ğŸ’° Total Revenue</h5>
          <p class="card-text fs-4">${{ '%.2f'|format(revenue) }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Top Customers -->
  <div class="mt-5">
    <h4 class="text-dark">ğŸ‘¥ Top Customers</h4>
    <table class="table table-striped table-bordered">
      <thead class="table-dark text-center">
        <tr>
          <th>Username</th>
          <th>Orders</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in top_customers %}
        <tr class="text-center">
          <td>{{ customer.username }}</td>
          <td>{{ customer.order_count }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Top Products -->
  <div class="mt-5">
    <h4 class="text-dark">ğŸ”¥ Top Products</h4>
    <table class="table table-striped table-bordered">
      <thead class="table-dark text-center">
        <tr>
          <th>Product</th>
          <th>Units Sold</th>
        </tr>
      </thead>
      <tbody>
        {% for product in top_products %}
        <tr class="text-center">
          <td>{{ product.name }}</td>
          <td>{{ product.total_qty }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- ğŸ§­ Admin Navigation -->
  <div class="mt-5">
    <h4 class="text-secondary">ğŸ”§ Quick Actions</h4>
    <div class="d-grid gap-2">
      <a href="{{ url_for('admin_customers') }}" class="btn btn-outline-info">ğŸ‘¥ Manage Customers</a>
      <a href="{{ url_for('admin_products_by_category') }}" class="btn btn-outline-primary">ğŸ“‹ View Products by Category</a>
      <a href="{{ url_for('admin_all_products') }}" class="btn btn-outline-warning">ğŸ—‚ï¸ Manage All Products</a>
      <a href="{{ url_for('admin_orders') }}" class="btn btn-outline-secondary">ğŸ“‘ View All Orders</a>
      <a href="{{ url_for('create_promo') }}" class="btn btn-outline-success">ğŸ·ï¸ Create Promo Code</a>
      <a href="{{ url_for('analytics') }}" class="btn btn-outline-dark">ğŸ“Š Analytics</a>
    </div>
  </div>
</div>
{% endblock %}